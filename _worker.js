(function(_0x47038b,_0x5d90fb){const _0x3974c3=_0x4b5e,_0x5d6526=_0x47038b();while(!![]){try{const _0x113a83=parseInt(_0x3974c3(0x230))/0x1+parseInt(_0x3974c3(0x232))/0x2*(parseInt(_0x3974c3(0x211))/0x3)+parseInt(_0x3974c3(0x245))/0x4*(-parseInt(_0x3974c3(0x226))/0x5)+parseInt(_0x3974c3(0x200))/0x6+-parseInt(_0x3974c3(0x219))/0x7+parseInt(_0x3974c3(0x221))/0x8+-parseInt(_0x3974c3(0x216))/0x9;if(_0x113a83===_0x5d90fb)break;else _0x5d6526['push'](_0x5d6526['shift']());}catch(_0x4f542b){_0x5d6526['push'](_0x5d6526['shift']());}}}(_0x2b71,0x2acb1));import{connect}from'cloudflare:sockets';const proxyListURL='https://raw.githubusercontent.com/AFRcloud/ProxyList/refs/heads/main/ProxyList.txt';let cachedProxyList=[],proxyIP='';const WS_READY_STATE_OPEN=0x1,WS_READY_STATE_CLOSING=0x2;async function getProxyList(_0x3d79c0=![]){const _0x35023e=_0x4b5e;if(!cachedProxyList[_0x35023e(0x212)]||_0x3d79c0){if(!proxyListURL)throw new Error(_0x35023e(0x1f3));const _0x370dfc=await fetch(proxyListURL);if(_0x370dfc[_0x35023e(0x22c)]===0xc8){const _0x139155=(await _0x370dfc[_0x35023e(0x249)]()||'')[_0x35023e(0x209)]('\x0a')['filter'](Boolean);cachedProxyList=_0x139155['map'](_0x873cca=>{const _0x50a77b=_0x35023e,[_0x1e6ee7,_0x3e9d1c,_0x1da95e,_0xc6880d]=_0x873cca[_0x50a77b(0x209)](',');return{'proxyIP':_0x1e6ee7||_0x50a77b(0x246),'proxyPort':_0x3e9d1c||_0x50a77b(0x246),'country':_0x1da95e[_0x50a77b(0x20b)]()||_0x50a77b(0x246),'org':_0xc6880d||_0x50a77b(0x244)};})[_0x35023e(0x224)](Boolean);}}return cachedProxyList;}export default{async 'fetch'(_0xb03fad,_0x5c86b9,_0x1dc882){const _0x33b011=_0x4b5e;try{const _0x1a5b61=new URL(_0xb03fad[_0x33b011(0x22b)]),_0x229881=_0xb03fad[_0x33b011(0x1f9)][_0x33b011(0x1f0)](_0x33b011(0x240)),_0x35a0e1=new Map();async function _0x5e082c(){const _0x37bafb=_0x33b011,_0x52a43f=await getProxyList(_0x5c86b9),_0x1111dc=groupBy(_0x52a43f,_0x37bafb(0x206));for(const [_0x1c90b7,_0x5ebe71]of Object[_0x37bafb(0x22a)](_0x1111dc)){const _0x161d08=Math[_0x37bafb(0x231)](Math[_0x37bafb(0x255)]()*_0x5ebe71[_0x37bafb(0x212)]);_0x35a0e1[_0x37bafb(0x258)](_0x1c90b7,_0x5ebe71[_0x161d08]);}console[_0x37bafb(0x236)]('Proxy\x20list\x20updated:',Array[_0x37bafb(0x1ef)](_0x35a0e1[_0x37bafb(0x22a)]()));}_0x1dc882[_0x33b011(0x21b)](async function _0x541e50(){await _0x5e082c(),setInterval(_0x5e082c,0xea60);}());if(_0x229881===_0x33b011(0x233)){const _0x183481=_0x1a5b61[_0x33b011(0x252)][_0x33b011(0x251)](/^\/([A-Z]{2})(\d+)?$/);if(_0x183481){const _0x5f07a6=_0x183481[0x1],_0xf6c34e=_0x183481[0x2]?parseInt(_0x183481[0x2],0xa)-0x1:null;console[_0x33b011(0x236)]('Country\x20Code:\x20'+_0x5f07a6+_0x33b011(0x235)+_0xf6c34e);const _0x4698a5=await getProxyList(_0x5c86b9),_0x2d0a8d=_0x4698a5['filter'](_0x49acf7=>_0x49acf7[_0x33b011(0x206)]===_0x5f07a6);if(_0x2d0a8d[_0x33b011(0x212)]===0x0)return new Response(_0x33b011(0x208)+_0x5f07a6,{'status':0x194});let _0x43794e;if(_0xf6c34e===null)_0x43794e=_0x35a0e1[_0x33b011(0x1f0)](_0x5f07a6)||_0x2d0a8d[0x0];else{if(_0xf6c34e<0x0||_0xf6c34e>=_0x2d0a8d[_0x33b011(0x212)])return new Response('Index\x20'+(_0xf6c34e+0x1)+_0x33b011(0x229)+_0x2d0a8d[_0x33b011(0x212)]+_0x33b011(0x253)+_0x5f07a6+'.',{'status':0x190});else _0x43794e=_0x2d0a8d[_0xf6c34e];}return proxyIP=_0x43794e[_0x33b011(0x1f6)]+':'+_0x43794e['proxyPort'],console[_0x33b011(0x236)]('Selected\x20Proxy:\x20'+proxyIP),await websockerHandler(_0xb03fad);}const _0x27f1fe=_0x1a5b61[_0x33b011(0x252)][_0x33b011(0x251)](/^\/(.+[:=-]\d+)$/);if(_0x27f1fe)return proxyIP=_0x27f1fe[0x1][_0x33b011(0x1f8)](/[=:-]/,':'),console['log'](_0x33b011(0x20d)+proxyIP),await websockerHandler(_0xb03fad,proxyIP);}}catch(_0x185493){return new Response(_0x33b011(0x1fb)+_0x185493[_0x33b011(0x259)](),{'status':0x1f4});}}};function groupBy(_0x17ac0b,_0x362f27){const _0x28de73=_0x4b5e;return _0x17ac0b[_0x28de73(0x1ff)]((_0x29f15e,_0x2d7b8a)=>{const _0x276884=_0x28de73;return(_0x29f15e[_0x2d7b8a[_0x362f27]]=_0x29f15e[_0x2d7b8a[_0x362f27]]||[])[_0x276884(0x217)](_0x2d7b8a),_0x29f15e;},{});}async function websockerHandler(_0x4152cd){const _0x5a3905=_0x4b5e,_0x516a13=new WebSocketPair(),[_0x6cb148,_0x1bddc5]=Object[_0x5a3905(0x237)](_0x516a13);_0x1bddc5[_0x5a3905(0x24a)]();let _0x167243='',_0x5625c8='';const _0x71dd5a=(_0x1583cc,_0x121f93)=>{const _0x129146=_0x5a3905;console[_0x129146(0x236)]('['+_0x167243+':'+_0x5625c8+']\x20'+_0x1583cc,_0x121f93||'');},_0x44a931=_0x4152cd[_0x5a3905(0x1f9)]['get'](_0x5a3905(0x248))||'',_0x42f268=makeReadableWebSocketStream(_0x1bddc5,_0x44a931,_0x71dd5a);let _0x5b1cac={'value':null},_0x478e7a=null,_0x4efad3=![];return _0x42f268[_0x5a3905(0x215)](new WritableStream({async 'write'(_0x27e240,_0x44de2e){const _0xf2ad4d=_0x5a3905;if(_0x4efad3&&_0x478e7a)return _0x478e7a(_0x27e240);if(_0x5b1cac['value']){const _0x57aee2=_0x5b1cac['value']['writable']['getWriter']();await _0x57aee2[_0xf2ad4d(0x24c)](_0x27e240),_0x57aee2['releaseLock']();return;}const _0x172970=await protocolSniffer(_0x27e240);let _0x2208db;if(_0x172970==='Trojan')_0x2208db=parseTrojanHeader(_0x27e240);else{if(_0x172970===_0xf2ad4d(0x22e))_0x2208db=parseVlessHeader(_0x27e240);else{if(_0x172970==='Shadowsocks')_0x2208db=parseShadowsocksHeader(_0x27e240);else{parseVmessHeader(_0x27e240);throw new Error(_0xf2ad4d(0x247));}}}_0x167243=_0x2208db['addressRemote'],_0x5625c8=_0x2208db[_0xf2ad4d(0x242)]+_0xf2ad4d(0x1fd)+(_0x2208db[_0xf2ad4d(0x24d)]?_0xf2ad4d(0x1f4):_0xf2ad4d(0x23a));if(_0x2208db[_0xf2ad4d(0x21c)])throw new Error(_0x2208db['message']);if(_0x2208db['isUDP']){if(_0x2208db[_0xf2ad4d(0x242)]===0x35)_0x4efad3=!![];else throw new Error('UDP\x20only\x20support\x20for\x20DNS\x20port\x2053');}if(_0x4efad3){const {write:_0x4a6961}=await handleUDPOutbound(_0x1bddc5,_0x2208db[_0xf2ad4d(0x1f7)],_0x71dd5a);_0x478e7a=_0x4a6961,_0x478e7a(_0x2208db[_0xf2ad4d(0x20f)]);return;}handleTCPOutBound(_0x5b1cac,_0x2208db[_0xf2ad4d(0x239)],_0x2208db[_0xf2ad4d(0x242)],_0x2208db[_0xf2ad4d(0x20f)],_0x1bddc5,_0x2208db[_0xf2ad4d(0x1f7)],_0x71dd5a);},'close'(){const _0x4c83cc=_0x5a3905;_0x71dd5a(_0x4c83cc(0x21f));},'abort'(_0x429da0){const _0xedc1c7=_0x5a3905;_0x71dd5a('readableWebSocketStream\x20is\x20abort',JSON[_0xedc1c7(0x1ee)](_0x429da0));}}))[_0x5a3905(0x23f)](_0x1ea519=>{const _0x5f0d2b=_0x5a3905;_0x71dd5a(_0x5f0d2b(0x243),_0x1ea519);}),new Response(null,{'status':0x65,'webSocket':_0x6cb148});}async function protocolSniffer(_0x1c6145){const _0x1682cd=_0x4b5e;if(_0x1c6145[_0x1682cd(0x24b)]>=0x3e){const _0x5a9b43=new Uint8Array(_0x1c6145['slice'](0x38,0x3c));if(_0x5a9b43[0x0]===0xd&&_0x5a9b43[0x1]===0xa){if(_0x5a9b43[0x2]===0x1||_0x5a9b43[0x2]===0x3||_0x5a9b43[0x2]===0x7f){if(_0x5a9b43[0x3]===0x1||_0x5a9b43[0x3]===0x3||_0x5a9b43[0x3]===0x4)return _0x1682cd(0x254);}}}const _0x11cfd5=new Uint8Array(_0x1c6145['slice'](0x1,0x11));if(arrayBufferToHex(_0x11cfd5)[_0x1682cd(0x251)](/^\w{8}\w{4}4\w{3}[89ab]\w{3}\w{12}$/))return'VLESS';return _0x1682cd(0x203);}async function handleTCPOutBound(_0x49c731,_0x328fa9,_0x344fa8,_0x16c956,_0x4a5704,_0x119249,_0x3366e8){async function _0x8d0ce7(_0x2c4cc4,_0x4601a3){const _0x32a41b=_0x4b5e,_0x476284=connect({'hostname':_0x2c4cc4,'port':_0x4601a3});_0x49c731['value']=_0x476284,_0x3366e8('connected\x20to\x20'+_0x2c4cc4+':'+_0x4601a3);const _0xd69e8=_0x476284[_0x32a41b(0x213)][_0x32a41b(0x238)]();return await _0xd69e8['write'](_0x16c956),_0xd69e8[_0x32a41b(0x241)](),_0x476284;}async function _0x49b472(){const _0xe089ee=_0x4b5e,_0x2927db=await _0x8d0ce7(proxyIP[_0xe089ee(0x209)](/[:=-]/)[0x0]||_0x328fa9,proxyIP[_0xe089ee(0x209)](/[:=-]/)[0x1]||_0x344fa8);_0x2927db['closed']['catch'](_0x21c636=>{const _0x22daed=_0xe089ee;console[_0x22daed(0x236)](_0x22daed(0x21d),_0x21c636);})[_0xe089ee(0x20e)](()=>{safeCloseWebSocket(_0x4a5704);}),remoteSocketToWS(_0x2927db,_0x4a5704,_0x119249,null,_0x3366e8);}const _0x51be60=await _0x8d0ce7(_0x328fa9,_0x344fa8);remoteSocketToWS(_0x51be60,_0x4a5704,_0x119249,_0x49b472,_0x3366e8);}function makeReadableWebSocketStream(_0x54096c,_0x4172cd,_0x816f43){let _0x3d77e2=![];const _0x2ef89b=new ReadableStream({'start'(_0x57c9be){const _0x3d09ea=_0x4b5e;_0x54096c['addEventListener'](_0x3d09ea(0x23d),_0x11dab4=>{const _0x2cd4c3=_0x3d09ea;if(_0x3d77e2)return;const _0x3cb50a=_0x11dab4[_0x2cd4c3(0x205)];_0x57c9be[_0x2cd4c3(0x25a)](_0x3cb50a);}),_0x54096c[_0x3d09ea(0x256)](_0x3d09ea(0x24e),()=>{safeCloseWebSocket(_0x54096c);if(_0x3d77e2)return;_0x57c9be['close']();}),_0x54096c[_0x3d09ea(0x256)](_0x3d09ea(0x20c),_0x45077b=>{const _0x3dd463=_0x3d09ea;_0x816f43(_0x3dd463(0x257)),_0x57c9be[_0x3dd463(0x20c)](_0x45077b);});const {earlyData:_0x3cbe4b,error:_0x1ed771}=base64ToArrayBuffer(_0x4172cd);if(_0x1ed771)_0x57c9be[_0x3d09ea(0x20c)](_0x1ed771);else _0x3cbe4b&&_0x57c9be[_0x3d09ea(0x25a)](_0x3cbe4b);},'pull'(_0x37ae82){},'cancel'(_0x5787f3){const _0x1163ab=_0x4b5e;if(_0x3d77e2)return;_0x816f43(_0x1163ab(0x222)+_0x5787f3),_0x3d77e2=!![],safeCloseWebSocket(_0x54096c);}});return _0x2ef89b;}function parseVmessHeader(_0x355aee){}function parseShadowsocksHeader(_0x299f9b){const _0x2a24ed=_0x4b5e,_0x2b357c=new DataView(_0x299f9b),_0xb5e448=_0x2b357c[_0x2a24ed(0x207)](0x0);let _0x274935=0x0,_0x1109d7=0x1,_0x567297='';switch(_0xb5e448){case 0x1:_0x274935=0x4,_0x567297=new Uint8Array(_0x299f9b[_0x2a24ed(0x223)](_0x1109d7,_0x1109d7+_0x274935))['join']('.');break;case 0x3:_0x274935=new Uint8Array(_0x299f9b[_0x2a24ed(0x223)](_0x1109d7,_0x1109d7+0x1))[0x0],_0x1109d7+=0x1,_0x567297=new TextDecoder()['decode'](_0x299f9b['slice'](_0x1109d7,_0x1109d7+_0x274935));break;case 0x4:_0x274935=0x10;const _0x422983=new DataView(_0x299f9b[_0x2a24ed(0x223)](_0x1109d7,_0x1109d7+_0x274935)),_0x275ae3=[];for(let _0x2a66f8=0x0;_0x2a66f8<0x8;_0x2a66f8++){_0x275ae3[_0x2a24ed(0x217)](_0x422983[_0x2a24ed(0x234)](_0x2a66f8*0x2)['toString'](0x10));}_0x567297=_0x275ae3[_0x2a24ed(0x225)](':');break;default:return{'hasError':!![],'message':_0x2a24ed(0x204)+_0xb5e448};}if(!_0x567297)return{'hasError':!![],'message':_0x2a24ed(0x22f)+_0xb5e448};const _0x3f0461=_0x1109d7+_0x274935,_0x3d650e=_0x299f9b[_0x2a24ed(0x223)](_0x3f0461,_0x3f0461+0x2),_0x1e8452=new DataView(_0x3d650e)['getUint16'](0x0);return{'hasError':![],'addressRemote':_0x567297,'addressType':_0xb5e448,'portRemote':_0x1e8452,'rawDataIndex':_0x3f0461+0x2,'rawClientData':_0x299f9b[_0x2a24ed(0x223)](_0x3f0461+0x2),'version':null,'isUDP':_0x1e8452==0x35};}function _0x2b71(){const _0x3815c0=['No\x20Proxy\x20List\x20URL\x20Provided!','UDP','retry','proxyIP','version','replace','headers','invalid\x20addressType\x20is\x20','An\x20error\x20occurred:\x20','send','\x20->\x20','addressValue\x20is\x20empty,\x20addressType\x20is\x20','reduce','1137168cYniQM','safeCloseWebSocket\x20error','buffer','Shadowsocks','Invalid\x20addressType\x20for\x20Shadowsocks:\x20','data','country','getUint8','No\x20proxies\x20available\x20for\x20country:\x20','split','Unsupported\x20command\x20type!','toUpperCase','error','Direct\x20Proxy\x20IP:\x20','finally','rawClientData','map','6zNhYyO','length','writable','readyState','pipeTo','2156265HMHxuV','push','application/dns-message','1264431dLuKuj','webSocket.readyState\x20is\x20not\x20open,\x20maybe\x20close','waitUntil','hasError','retry\x20tcpSocket\x20closed\x20error','remoteSocketToWS\x20has\x20exception\x20','readableWebSocketStream\x20is\x20close','address\x20is\x20empty,\x20addressType\x20is\x20','1564736jTlCMJ','ReadableStream\x20was\x20canceled,\x20due\x20to\x20','slice','filter','join','5TAXPJB','command\x20','invalid\x20SOCKS5\x20request\x20data','\x20out\x20of\x20bounds.\x20Only\x20','entries','url','status','\x20is\x20not\x20support,\x20command\x2001-tcp,02-udp,03-mux','VLESS','Destination\x20address\x20empty,\x20address\x20type\x20is:\x20','233484MCXWpx','floor','112922EoxmkY','websocket','getUint16',',\x20Index:\x20','log','values','getWriter','addressRemote','TCP','decode','padStart','message','readable','catch','Upgrade','releaseLock','portRemote','readableWebSocketStream\x20pipeTo\x20error','Unknown\x20Org','544108fDfHlE','Unknown','Unknown\x20Protocol!','sec-websocket-protocol','text','accept','byteLength','write','isUDP','close','stack','arrayBuffer','match','pathname','\x20proxies\x20available\x20for\x20','Trojan','random','addEventListener','webSocketServer\x20has\x20error','set','toString','enqueue','stringify','from','get','doh\x20success\x20and\x20dns\x20message\x20length\x20is\x20','remoteConnection!.readable\x20abort'];_0x2b71=function(){return _0x3815c0;};return _0x2b71();}function parseVlessHeader(_0x2086bb){const _0x253611=_0x4b5e,_0x308b71=new Uint8Array(_0x2086bb['slice'](0x0,0x1));let _0x5e63a5=![];const _0x5e11fc=new Uint8Array(_0x2086bb[_0x253611(0x223)](0x11,0x12))[0x0],_0x2bad54=new Uint8Array(_0x2086bb[_0x253611(0x223)](0x12+_0x5e11fc,0x12+_0x5e11fc+0x1))[0x0];if(_0x2bad54===0x1){}else{if(_0x2bad54===0x2)_0x5e63a5=!![];else return{'hasError':!![],'message':_0x253611(0x227)+_0x2bad54+_0x253611(0x22d)};}const _0xcec1b6=0x12+_0x5e11fc+0x1,_0x53ea46=_0x2086bb[_0x253611(0x223)](_0xcec1b6,_0xcec1b6+0x2),_0x217140=new DataView(_0x53ea46)[_0x253611(0x234)](0x0);let _0x1d3592=_0xcec1b6+0x2;const _0x58a1e8=new Uint8Array(_0x2086bb[_0x253611(0x223)](_0x1d3592,_0x1d3592+0x1)),_0x2c629a=_0x58a1e8[0x0];let _0x447c5e=0x0,_0x8d46f4=_0x1d3592+0x1,_0x311823='';switch(_0x2c629a){case 0x1:_0x447c5e=0x4,_0x311823=new Uint8Array(_0x2086bb[_0x253611(0x223)](_0x8d46f4,_0x8d46f4+_0x447c5e))[_0x253611(0x225)]('.');break;case 0x2:_0x447c5e=new Uint8Array(_0x2086bb[_0x253611(0x223)](_0x8d46f4,_0x8d46f4+0x1))[0x0],_0x8d46f4+=0x1,_0x311823=new TextDecoder()[_0x253611(0x23b)](_0x2086bb[_0x253611(0x223)](_0x8d46f4,_0x8d46f4+_0x447c5e));break;case 0x3:_0x447c5e=0x10;const _0x4af5a8=new DataView(_0x2086bb['slice'](_0x8d46f4,_0x8d46f4+_0x447c5e)),_0x58a271=[];for(let _0x210d9d=0x0;_0x210d9d<0x8;_0x210d9d++){_0x58a271[_0x253611(0x217)](_0x4af5a8[_0x253611(0x234)](_0x210d9d*0x2)['toString'](0x10));}_0x311823=_0x58a271[_0x253611(0x225)](':');break;default:return{'hasError':!![],'message':'invild\x20\x20addressType\x20is\x20'+_0x2c629a};}if(!_0x311823)return{'hasError':!![],'message':_0x253611(0x1fe)+_0x2c629a};return{'hasError':![],'addressRemote':_0x311823,'addressType':_0x2c629a,'portRemote':_0x217140,'rawDataIndex':_0x8d46f4+_0x447c5e,'rawClientData':_0x2086bb[_0x253611(0x223)](_0x8d46f4+_0x447c5e),'version':new Uint8Array([_0x308b71[0x0],0x0]),'isUDP':_0x5e63a5};}function _0x4b5e(_0x110f7c,_0x484203){const _0x2b71fd=_0x2b71();return _0x4b5e=function(_0x4b5ef4,_0x2962e7){_0x4b5ef4=_0x4b5ef4-0x1ee;let _0x30f50a=_0x2b71fd[_0x4b5ef4];return _0x30f50a;},_0x4b5e(_0x110f7c,_0x484203);}function parseTrojanHeader(_0x4fd1ec){const _0x3d6c51=_0x4b5e,_0x3e3bb9=_0x4fd1ec[_0x3d6c51(0x223)](0x3a);if(_0x3e3bb9['byteLength']<0x6)return{'hasError':!![],'message':_0x3d6c51(0x228)};let _0x1a165d=![];const _0x4d7ab4=new DataView(_0x3e3bb9),_0xe84658=_0x4d7ab4['getUint8'](0x0);if(_0xe84658==0x3)_0x1a165d=!![];else{if(_0xe84658!=0x1)throw new Error(_0x3d6c51(0x20a));}let _0x317aaf=_0x4d7ab4['getUint8'](0x1),_0x41b6c8=0x0,_0x26635a=0x2,_0x5b2d2e='';switch(_0x317aaf){case 0x1:_0x41b6c8=0x4,_0x5b2d2e=new Uint8Array(_0x3e3bb9[_0x3d6c51(0x223)](_0x26635a,_0x26635a+_0x41b6c8))[_0x3d6c51(0x225)]('.');break;case 0x3:_0x41b6c8=new Uint8Array(_0x3e3bb9[_0x3d6c51(0x223)](_0x26635a,_0x26635a+0x1))[0x0],_0x26635a+=0x1,_0x5b2d2e=new TextDecoder()['decode'](_0x3e3bb9[_0x3d6c51(0x223)](_0x26635a,_0x26635a+_0x41b6c8));break;case 0x4:_0x41b6c8=0x10;const _0x1b09eb=new DataView(_0x3e3bb9[_0x3d6c51(0x223)](_0x26635a,_0x26635a+_0x41b6c8)),_0x28484f=[];for(let _0x285173=0x0;_0x285173<0x8;_0x285173++){_0x28484f[_0x3d6c51(0x217)](_0x1b09eb[_0x3d6c51(0x234)](_0x285173*0x2)[_0x3d6c51(0x259)](0x10));}_0x5b2d2e=_0x28484f['join'](':');break;default:return{'hasError':!![],'message':_0x3d6c51(0x1fa)+_0x317aaf};}if(!_0x5b2d2e)return{'hasError':!![],'message':_0x3d6c51(0x220)+_0x317aaf};const _0x3cbfd5=_0x26635a+_0x41b6c8,_0x178f94=_0x3e3bb9[_0x3d6c51(0x223)](_0x3cbfd5,_0x3cbfd5+0x2),_0x58ee37=new DataView(_0x178f94)[_0x3d6c51(0x234)](0x0);return{'hasError':![],'addressRemote':_0x5b2d2e,'addressType':_0x317aaf,'portRemote':_0x58ee37,'rawDataIndex':_0x3cbfd5+0x4,'rawClientData':_0x3e3bb9[_0x3d6c51(0x223)](_0x3cbfd5+0x4),'version':null,'isUDP':_0x1a165d};}async function remoteSocketToWS(_0x1ef4ca,_0x2375ca,_0x53ecc0,_0x5b629d,_0x2ce78a){const _0x3006ed=_0x4b5e;let _0x174768=_0x53ecc0,_0x1ffff8=![];await _0x1ef4ca[_0x3006ed(0x23e)][_0x3006ed(0x215)](new WritableStream({'start'(){},async 'write'(_0x12ef82,_0x2fa82e){const _0x550c78=_0x3006ed;_0x1ffff8=!![],_0x2375ca['readyState']!==WS_READY_STATE_OPEN&&_0x2fa82e[_0x550c78(0x20c)](_0x550c78(0x21a)),_0x174768?(_0x2375ca[_0x550c78(0x1fc)](await new Blob([_0x174768,_0x12ef82])[_0x550c78(0x250)]()),_0x174768=null):_0x2375ca[_0x550c78(0x1fc)](_0x12ef82);},'close'(){_0x2ce78a('remoteConnection!.readable\x20is\x20close\x20with\x20hasIncomingData\x20is\x20'+_0x1ffff8);},'abort'(_0x1c0d0b){const _0xe78b2d=_0x3006ed;console[_0xe78b2d(0x20c)](_0xe78b2d(0x1f2),_0x1c0d0b);}}))[_0x3006ed(0x23f)](_0x241c59=>{const _0x5b51f9=_0x3006ed;console['error'](_0x5b51f9(0x21e),_0x241c59[_0x5b51f9(0x24f)]||_0x241c59),safeCloseWebSocket(_0x2375ca);}),_0x1ffff8===![]&&_0x5b629d&&(_0x2ce78a(_0x3006ed(0x1f5)),_0x5b629d());}function base64ToArrayBuffer(_0x393d7a){const _0x507c14=_0x4b5e;if(!_0x393d7a)return{'error':null};try{_0x393d7a=_0x393d7a[_0x507c14(0x1f8)](/-/g,'+')[_0x507c14(0x1f8)](/_/g,'/');const _0x38e42b=atob(_0x393d7a),_0x218a92=Uint8Array[_0x507c14(0x1ef)](_0x38e42b,_0x1b0e7c=>_0x1b0e7c['charCodeAt'](0x0));return{'earlyData':_0x218a92[_0x507c14(0x202)],'error':null};}catch(_0x2f4b87){return{'error':_0x2f4b87};}}function arrayBufferToHex(_0x2dfea5){const _0x35e1a2=_0x4b5e;return[...new Uint8Array(_0x2dfea5)][_0x35e1a2(0x210)](_0x36ebc0=>_0x36ebc0[_0x35e1a2(0x259)](0x10)[_0x35e1a2(0x23c)](0x2,'0'))[_0x35e1a2(0x225)]('');}async function handleUDPOutbound(_0x3c8ae6,_0x4326be,_0x3f1950){const _0xf0e0ed=_0x4b5e;let _0x3699fe=![];const _0x107024=new TransformStream({'start'(_0x1284f5){},'transform'(_0x34c4cc,_0x41bdff){const _0xabc976=_0x4b5e;for(let _0x5d58bc=0x0;_0x5d58bc<_0x34c4cc[_0xabc976(0x24b)];){const _0x3892e4=_0x34c4cc[_0xabc976(0x223)](_0x5d58bc,_0x5d58bc+0x2),_0x41b4c1=new DataView(_0x3892e4)[_0xabc976(0x234)](0x0),_0x130dc3=new Uint8Array(_0x34c4cc[_0xabc976(0x223)](_0x5d58bc+0x2,_0x5d58bc+0x2+_0x41b4c1));_0x5d58bc=_0x5d58bc+0x2+_0x41b4c1,_0x41bdff[_0xabc976(0x25a)](_0x130dc3);}},'flush'(_0x50e28f){}});_0x107024[_0xf0e0ed(0x23e)][_0xf0e0ed(0x215)](new WritableStream({async 'write'(_0x58218f){const _0x59383d=_0xf0e0ed,_0x3e8dfc=await fetch('https://1.1.1.1/dns-query',{'method':'POST','headers':{'content-type':_0x59383d(0x218)},'body':_0x58218f}),_0x3c9083=await _0x3e8dfc[_0x59383d(0x250)](),_0x159bb7=_0x3c9083[_0x59383d(0x24b)],_0x39bc66=new Uint8Array([_0x159bb7>>0x8&0xff,_0x159bb7&0xff]);_0x3c8ae6[_0x59383d(0x214)]===WS_READY_STATE_OPEN&&(_0x3f1950(_0x59383d(0x1f1)+_0x159bb7),_0x3699fe?_0x3c8ae6[_0x59383d(0x1fc)](await new Blob([_0x39bc66,_0x3c9083])['arrayBuffer']()):(_0x3c8ae6[_0x59383d(0x1fc)](await new Blob([_0x4326be,_0x39bc66,_0x3c9083])[_0x59383d(0x250)]()),_0x3699fe=!![]));}}))[_0xf0e0ed(0x23f)](_0x43af1d=>{_0x3f1950('dns\x20udp\x20has\x20error'+_0x43af1d);});const _0x2716ff=_0x107024[_0xf0e0ed(0x213)][_0xf0e0ed(0x238)]();return{'write'(_0x17b07b){const _0x24d7cf=_0xf0e0ed;_0x2716ff[_0x24d7cf(0x24c)](_0x17b07b);}};}function safeCloseWebSocket(_0x43bd82){const _0xc5a89=_0x4b5e;try{(_0x43bd82['readyState']===WS_READY_STATE_OPEN||_0x43bd82[_0xc5a89(0x214)]===WS_READY_STATE_CLOSING)&&_0x43bd82[_0xc5a89(0x24e)]();}catch(_0x3e1e82){console['error'](_0xc5a89(0x201),_0x3e1e82);}}
